language: scala
scala:
  - 2.12.9
jdk:
  - openjdk8
addons:
  postgresql: "10.0"
  apt:
    packages:
      - postgresql-10
      - postgresql-client-10
sudo: false

env:
  - TEST_DIR=impure
  - TEST_DIR=pure

before_script:
  - psql -c "CREATE ROLE impure WITH LOGIN ENCRYPTED PASSWORD 'secret';" -U postgres
  - psql -c "CREATE DATABASE impure_test WITH OWNER impure;" -U postgres
  - psql -c "CREATE ROLE pure WITH LOGIN ENCRYPTED PASSWORD 'secret';" -U postgres
  - psql -c "CREATE DATABASE pure_test WITH OWNER pure;" -U postgres

script:
  - cd ${TEST_DIR} && sbt clean test it:test

